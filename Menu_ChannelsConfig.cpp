#include "stdafx.h"

//通道配置子条目
SOFT_SUB_ITEM subitemChannelsConfig[] =
{
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES | SIA_GROUP,
		SIS_RadioButtonEx,
		0,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X1,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		1,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16, 
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X2_1,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		2,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X2_2,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		3,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X2_3,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		4,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X2_4,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		5,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X3_1,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		6,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X3_2,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		7,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X3_3,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		8,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X3_4,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		9,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X3_5,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		10,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X3_6,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		11,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X4_1,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		12,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X4_2,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		13,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X4_3,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_ORIGCLICK,
		SIA_BITMAP | SIA_MAINRES,
		SIS_RadioButtonEx,
		14,
		NULL,
		NULL,
		BtnWidth_W,
		BtnHeith_H2,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		(void *)IDB_BMP_X6_1,
		NULL,
		TA_ALLOCCHAN,
		CA_ALLOCCHAN,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
		,
		{
			SIF_ORIGCLICK,
			SIA_BITMAP | SIA_MAINRES,
			SIS_RadioButtonEx,
			15,
			NULL,
			NULL,
			BtnWidth_W,
			BtnHeith_H2,
			NULL,
			RESERVE_DWORD16,
			RESERVE_DWORD16,
			0,
			(void *)IDB_BMP_X6_2,
			NULL,
			TA_ALLOCCHAN,
			CA_ALLOCCHAN,
			0,
			NULL,
			RESERVE_DWORD4,
			RESERVE_DWORD4
		}
		,
		{
			SIF_ORIGCLICK,
			SIA_BITMAP | SIA_MAINRES,
			SIS_RadioButtonEx,
			16,
			NULL,
			NULL,
			BtnWidth_W,
			BtnHeith_H2,
			NULL,
			RESERVE_DWORD16,
			RESERVE_DWORD16,
			0,
			(void *)IDB_BMP_X8_1,
			NULL,
			TA_ALLOCCHAN,
			CA_ALLOCCHAN,
			0,
			NULL,
			RESERVE_DWORD4,
			RESERVE_DWORD4
		}
		,
		{
			SIF_ORIGCLICK,
			SIA_BITMAP | SIA_MAINRES,
			SIS_RadioButtonEx,
			17,
			NULL,
			NULL,
			BtnWidth_W,
			BtnHeith_H2,
			NULL,
			RESERVE_DWORD16,
			RESERVE_DWORD16,
			0,
			(void *)IDB_BMP_X8_2,
			NULL,
			TA_ALLOCCHAN,
			CA_ALLOCCHAN,
			0,
			NULL,
			RESERVE_DWORD4,
			RESERVE_DWORD4
		}
		,
		{
			SIF_ORIGCLICK,
			SIA_BITMAP | SIA_MAINRES,
			SIS_RadioButtonEx,
			18,
			NULL,
			NULL,
			BtnWidth_W,
			BtnHeith_H2,
			NULL,
			RESERVE_DWORD16,
			RESERVE_DWORD16,
			0,
			(void *)IDB_BMP_X9_1,
			NULL,
			TA_ALLOCCHAN,
			CA_ALLOCCHAN,
			0,
			NULL,
			RESERVE_DWORD4,
			RESERVE_DWORD4
		}
};

//当前通道子条目
SOFT_SUB_ITEM subitemCurrentChannels[] =
{
	{
		SIF_SNDMSGCMD,
		SIA_FULLLINE,
		SIS_ButtonEx,
		0,
		L"Channel Prev\0前一通道\0前壹通道\0\0",
		NULL,
		BtnWidth_W,
		BtnHeith_H,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		NULL,
		(WPARAM)0x000003E8,
		0,
		NULL,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_SNDMSGCMD,
		SIA_FULLLINE,
		SIS_ButtonEx,
		0,
		L"Channel Next\0后一通道\0後壹通道\0\0",
		NULL,
		BtnWidth_W,
		BtnHeith_H,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		NULL,
		(WPARAM)0x000003E9,
		0,
		NULL,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
	,
	{
		SIF_SNDMSGCMD,
		SIA_FULLLINE,
		SIS_ButtonEx,
		0,
		L"Channel Max\0通道最大化\0通道最大化\0\0",
		NULL,
		BtnWidth_W,
		BtnHeith_H,
		NULL,
		RESERVE_DWORD16,
		RESERVE_DWORD16,
		0,
		NULL,
		(WPARAM)0x000003EC,
		0,
		NULL,
		0,
		NULL,
		RESERVE_DWORD4,
		RESERVE_DWORD4
	}
};


int WINAPI fnTagPageEnter_ChannelsConfig(DWORD dwFlags, WPARAM wParam, LPARAM lParam, struct _SOFT_TAG_PAGE *lpTagPage);

//通道配置子菜单
SOFT_TAG_PAGE submenuChannelsConfig[] =
{
	{
		TPF_FN_ENTER,
		0,
		L"Channels Config\0通道配置\0通道配置\0\0",
		NULL,
		sizeof(subitemChannelsConfig) / sizeof(SOFT_SUB_ITEM),
		subitemChannelsConfig,
		RESERVE_DWORD4,
		&fnTagPageEnter_ChannelsConfig,
		NULL,
		0,
		{ L"::/Measurement/Setting_Measurement_Conditions/Setting_Channels_and_Traces.htm#Setting_channel_display__layout_of_channel_windows_", (void*)1024, 0, 0 }
	}
	,
	{
		0,
		0,
		L"Current Channels\0当前通道\0當前通道\0\0",
		NULL,
		sizeof(subitemCurrentChannels) / sizeof(SOFT_SUB_ITEM),
		subitemCurrentChannels,
		RESERVE_DWORD4,
		NULL,
		NULL,
		0,
		{ L"::/Measurement/Setting_Measurement_Conditions/Setting_Channels_and_Traces.htm#Setting_channel_display__layout_of_channel_windows_", (void*)1024, 0, 0 }
	}
};


int WINAPI fnTagPageEnter_ChannelsConfig(DWORD dwFlags, WPARAM wParam, LPARAM lParam, struct _SOFT_TAG_PAGE *lpTagPage)
{
	OrigSoftMenu_Enter(CA_DISPLAY);
	OrigSoftMenu_UpdateItems(CA_DISPLAY);
	OrigSoftMenu_Enter(CA_ALLOCCHAN);
	OrigSoftMenu_UpdateItems(CA_ALLOCCHAN);

	switch (nChannels)
	{
	case 1:
		submenuChannelsConfig[0].dwNumOfSubItems = 1;
		break;
	case 2:
		submenuChannelsConfig[0].dwNumOfSubItems = 5;
		break;
	case 4:
		submenuChannelsConfig[0].dwNumOfSubItems = 14;
		break;
	case 9:
		submenuChannelsConfig[0].dwNumOfSubItems = 19;
		break;
	case 12:
		submenuChannelsConfig[0].dwNumOfSubItems = 19;
		break;
	case 16:
		submenuChannelsConfig[0].dwNumOfSubItems = 19;
		break;
	case 24:
		submenuChannelsConfig[0].dwNumOfSubItems = 19;
		break;
	case 36:
		submenuChannelsConfig[0].dwNumOfSubItems = 19;
		break;
	default:
		break;
	}

	return 0;
}


//通道配置主菜单
SOFT_MENU menuChannelsConfig =
{
	0,
	0,
	L"Channels Config\0通道配置\0通道配置\0\0",
	NULL,
	sizeof(submenuChannelsConfig) / sizeof(SOFT_TAG_PAGE),
	submenuChannelsConfig,
	NULL,
	NULL,
	0,
	RESERVE_DWORD4
};
